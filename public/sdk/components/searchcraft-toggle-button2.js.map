{"file":"searchcraft-toggle-button2.js","mappings":";;;;MAqBa,uBAAuB,iBAAAA,kBAAA,CAAA,MAAA,uBAAA,SAAAC,CAAA,CAAA;;;;;;;;AAClC;;AAEG;IACK,KAAK,GAAG,QAAQ;AACxB;;AAEG;AACK,IAAA,QAAQ;AAChB;;AAEG;AACK,IAAA,aAAa;AAErB;;AAEG;AACM,IAAA,aAAa;IAEb,QAAQ,GAAG,KAAK;AAChB,IAAA,cAAc;AACf,IAAA,WAAW;AACX,IAAA,WAAW;IAEX,YAAY,GAAG,YAAW;AAChC,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ;QAC9B,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;AACzC,KAAC;AAED,IAAA,eAAe,CAAC,IAAqB,EAAA;;AAEnC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,KAAI;AAChD,YAAA,IACE,KAAK,CAAC,UAAU,KAAK,IAAI,CAAC,cAAc;gBACxC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EACpC;AACA,gBAAA,IAAI,CAAC,QAAQ,GAAG,KAAK;;AAEvB,YAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC,UAAU;AACxC,SAAC,CAAC;;IAGJ,iBAAiB,GAAA;QACf,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,eAAe,CACzC,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAChC;;IAGH,oBAAoB,GAAA;AAClB,QAAA,IAAI,CAAC,WAAW,IAAI;AACpB,QAAA,IAAI,CAAC,WAAW,IAAI;;IAGtB,MAAM,GAAA;AACJ,QAAA,QACE,CACE,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAE,UAAU,CAAC,2BAA2B,EAAE;gBAC7C,kCAAkC,EAAE,IAAI,CAAC,QAAQ;aAClD,CAAC,EAAA,EAEF,CAAA,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EACE,CAAA,CAAA,GAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAG,KAAK,EAAC,iCAAiC,IAAE,IAAI,CAAC,KAAK,CAAK,EAC1D,IAAI,CAAC,QAAQ,KACZ,0DAAG,KAAK,EAAC,qCAAqC,EAAA,EAAE,IAAI,CAAC,QAAQ,CAAK,CACnE,CACG,EACN,CAAA,CAAA,QAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACE,KAAK,EAAC,sCAAsC,EAC5C,OAAO,EAAE,IAAI,CAAC,YAAY,EAC1B,IAAI,EAAC,QAAQ,EAAA,EAEb,CAAA,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAK,KAAK,EAAC,kCAAkC,GAAG,CACzC,CACL;;;;;;;;;;;;;;;;;;;;;;;;;","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/searchcraft-toggle-button/searchcraft-toggle-button.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport {\n  Component,\n  Event,\n  type EventEmitter,\n  Prop,\n  State,\n  h,\n} from '@stencil/core';\nimport classNames from 'classnames';\n\n/**\n * This web component simulates a light switch functionality, providing a simple and intuitive toggle between two statesâ€”on and off.\n *\n * @internal\n */\n@Component({\n  tag: 'searchcraft-toggle-button',\n  shadow: false,\n})\nexport class SearchcraftToggleButton {\n  /**\n   * The label.\n   */\n  @Prop() label = 'Toggle';\n  /**\n   * The secondary label displayed below the main label.\n   */\n  @Prop() subLabel: string | undefined;\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n\n  /**\n   * When the toggle element is changed.\n   */\n  @Event() toggleUpdated?: EventEmitter<boolean>;\n\n  @State() isActive = false;\n  @State() lastSearchTerm: string | undefined;\n  private unsubscribe: (() => void) | undefined;\n  private cleanupCore?: () => void;\n\n  private handleToggle = async () => {\n    this.isActive = !this.isActive;\n    this.toggleUpdated?.emit(this.isActive);\n  };\n\n  onCoreAvailable(core: SearchcraftCore) {\n    /** When the query changes, sets toggle button state back to inactive. */\n    this.unsubscribe = core.store.subscribe((state) => {\n      if (\n        state.searchTerm !== this.lastSearchTerm &&\n        state.searchTerm.trim().length === 0\n      ) {\n        this.isActive = false;\n      }\n      this.lastSearchTerm = state.searchTerm;\n    });\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n  }\n\n  render() {\n    return (\n      <div\n        class={classNames('searchcraft-toggle-button', {\n          'searchcraft-toggle-button-active': this.isActive,\n        })}\n      >\n        <div>\n          <p class='searchcraft-toggle-button-label'>{this.label}</p>\n          {this.subLabel && (\n            <p class='searchcraft-toggle-button-sub-label'>{this.subLabel}</p>\n          )}\n        </div>\n        <button\n          class='searchcraft-toggle-button-background'\n          onClick={this.handleToggle}\n          type='button'\n        >\n          <div class='searchcraft-toggle-button-handle' />\n        </button>\n      </div>\n    );\n  }\n}\n"],"version":3}