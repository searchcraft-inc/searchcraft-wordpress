{"file":"p-90bc1590.js","mappings":"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","names":[],"sources":["src/components/searchcraft-popover-list-view/searchcraft-popover-list-view.tsx"],"sourcesContent":["import type {\n  AdClientResponseItem,\n  SearchClientResponseItem,\n  PopoverResultMappings,\n  SearchcraftConfig,\n} from '@types';\nimport { Component, h, Prop, type JSX } from '@stencil/core';\nimport type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\n\n/**\n * This web component is designed to display a list of results within a popover interface.\n * It is consumed within the `searchcraft-popover-form` component.\n *\n * @js-example\n * ```html\n * <searchcraft-popover-list-view />\n * ```\n *\n * @internal\n */\n@Component({\n  tag: 'searchcraft-popover-list-view',\n  shadow: false,\n})\nexport class SearchcraftPopoverListView {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  /**\n   * The mappings that define how the data in the documents are mapped to the\n   * list-view-item elements.\n   */\n  @Prop() popoverResultMappings: PopoverResultMappings | undefined;\n  /**\n   * The items to render in the list view.\n   */\n  @Prop() searchClientResponseItems: SearchClientResponseItem[] | undefined;\n  @Prop() adClientResponseItems: AdClientResponseItem[] | undefined;\n  @Prop() searchResultsPage!: number;\n  @Prop() searchResultsPerPage!: number;\n\n  private config?: SearchcraftConfig;\n  private cleanupCore?: () => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.config = core.config;\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.cleanupCore?.();\n  }\n\n  renderWithADMAds() {\n    return (\n      <div class='searchcraft-popover-list-view'>\n        {this.adClientResponseItems?.map((item) => (\n          <searchcraft-ad\n            searchcraft-id={this.searchcraftId}\n            adClientResponseItem={item}\n            adSource='adMarketplace'\n            key={item.id}\n            renderPosition='top'\n          />\n        ))}\n        {this.searchClientResponseItems?.map((item, index) => (\n          <searchcraft-popover-list-item\n            searchcraft-id={this.searchcraftId}\n            item={item}\n            key={item.id}\n            popoverResultMappings={this.popoverResultMappings}\n            documentPosition={\n              this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n\n  renderWithCustomAds() {\n    const itemsToRender: JSX.Element[] = [];\n    const interstitialInterval =\n      this.config?.customAdConfig?.adInterstitialInterval || 0;\n    const interstitialQuantity =\n      this.config?.customAdConfig?.adInterstitialQuantity || 1;\n    const adStartQuantity = this.config?.customAdConfig?.adStartQuantity || 0;\n    const adEndQuantity = this.config?.customAdConfig?.adEndQuantity || 0;\n    const searchItems = this.searchClientResponseItems || [];\n\n    // Renders ads at beginning\n    for (let n = 0; n < adStartQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Custom'\n          key={`${n}-ad`}\n          renderPosition='top'\n        />,\n      );\n    }\n\n    // Renders search results + interstitial ads\n    searchItems.forEach((item, index) => {\n      if (\n        interstitialInterval &&\n        index % interstitialInterval === 0 &&\n        index + interstitialInterval < searchItems.length &&\n        index >= interstitialInterval\n      ) {\n        for (let n = 0; n < interstitialQuantity; n++) {\n          itemsToRender.push(\n            <searchcraft-ad\n              searchcraft-id={this.searchcraftId}\n              adSource='Custom'\n              key={`${item.id}-ad-${n}`}\n              renderPosition='interstitial'\n            />,\n          );\n        }\n      }\n\n      itemsToRender.push(\n        <searchcraft-popover-list-item\n          searchcraft-id={this.searchcraftId}\n          item={item}\n          key={item.id}\n          popoverResultMappings={this.popoverResultMappings}\n          documentPosition={\n            this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n          }\n        />,\n      );\n    });\n\n    // Renders ads at end\n    for (let n = 0; n < adEndQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Custom'\n          key={`${n}-ad`}\n          renderPosition='bottom'\n        />,\n      );\n    }\n\n    return <div class='searchcraft-popover-list-view'>{itemsToRender}</div>;\n  }\n\n  renderWithNativoAds() {\n    const itemsToRender: JSX.Element[] = [];\n    const interstitialStartIndex =\n      this.config?.nativoConfig?.adInterstialStartIndex || 0;\n    const interstitialInterval =\n      this.config?.nativoConfig?.adInterstitialInterval || 0;\n    const interstitialQuantity =\n      this.config?.nativoConfig?.adInterstitialQuantity || 1;\n    const adStartQuantity = this.config?.nativoConfig?.adStartQuantity || 0;\n    const adEndQuantity = this.config?.nativoConfig?.adEndQuantity || 0;\n    const searchItems = this.searchClientResponseItems || [];\n\n    // Renders ads at beginning\n    for (let n = 0; n < adStartQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Nativo'\n          key={`${n}-ad`}\n          renderPosition='top'\n        />,\n      );\n    }\n\n    // Renders search results + interstitial ads\n    searchItems.forEach((item, index) => {\n      if (\n        interstitialInterval &&\n        (index + interstitialStartIndex) % interstitialInterval === 0 &&\n        index + interstitialInterval < searchItems.length &&\n        index >= interstitialInterval\n      ) {\n        for (let n = 0; n < interstitialQuantity; n++) {\n          itemsToRender.push(\n            <searchcraft-ad\n              searchcraft-id={this.searchcraftId}\n              adSource='Nativo'\n              key={`${item.id}-ad-${n}`}\n              renderPosition='interstitial'\n            />,\n          );\n        }\n      }\n\n      itemsToRender.push(\n        <searchcraft-popover-list-item\n          searchcraft-id={this.searchcraftId}\n          item={item}\n          key={item.id}\n          popoverResultMappings={this.popoverResultMappings}\n          documentPosition={\n            this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n          }\n        />,\n      );\n    });\n\n    // Renders ads at end\n    for (let n = 0; n < adEndQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Nativo'\n          key={`${n}-ad`}\n          renderPosition='bottom'\n        />,\n      );\n    }\n\n    return <div class='searchcraft-popover-list-view'>{itemsToRender}</div>;\n  }\n\n  renderWithNoAds() {\n    return (\n      <div class='searchcraft-popover-list-view'>\n        {this.searchClientResponseItems?.map((item, index) => (\n          <searchcraft-popover-list-item\n            searchcraft-id={this.searchcraftId}\n            item={item}\n            key={item.id}\n            popoverResultMappings={this.popoverResultMappings}\n            documentPosition={\n              this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    if (this.config?.customAdConfig) {\n      return this.renderWithCustomAds();\n    }\n    if (this.config?.nativoConfig) {\n      return this.renderWithNativoAds();\n    }\n    if (this.config?.admAdConfig) {\n      return this.renderWithADMAds();\n    }\n    return this.renderWithNoAds();\n  }\n}\n"],"version":3}