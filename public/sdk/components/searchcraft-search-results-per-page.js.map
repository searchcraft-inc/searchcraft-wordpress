{"file":"searchcraft-search-results-per-page.js","mappings":"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","names":["SearchcraftSearchResultsPerPage","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/searchcraft-search-results-per-page/searchcraft-search-results-per-page.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, Prop, State, h } from '@stencil/core';\n\n/**\n * This web component is designed to choose the number of search results displayed.\n *\n * @react-import\n * ```jsx\n * import { SearchcraftSearchResultsPerPage } from \"@searchcraft/react-sdk\";\n * ```\n *\n * @vue-import\n * ```jsx\n * import { SearchcraftSearchResultsPerPage } from \"@searchcraft/vue-sdk\";\n * ```\n *\n * @js-example\n * ```html\n * <!-- index.html -->\n * <searchcraft-search-results-per-page increment=\"20\" />\n * ```\n *\n * @react-example\n * ```jsx\n * <SearchcraftSearchResultsPerPage increment={20} />\n * ```\n *\n * @vue-example\n * ```jsx\n * <SearchcraftSearchResultsPerPage increment=\"20\" />\n * ```\n */\n@Component({\n  tag: 'searchcraft-search-results-per-page',\n  shadow: false,\n})\nexport class SearchcraftSearchResultsPerPage {\n  /**\n   * The amount the options will increase (e.g. 20 = [20, 40, 60, 80, 100]).\n   * The base value is defined by the `searchResultsPerPage` option in the configuration.\n   */\n  @Prop() increment: string | number = 20;\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n\n  // store vars\n  @State() searchTerm;\n  @State() searchResultsPage;\n  @State() searchResultsPerPage;\n  @State() searchResultsCount;\n  @State() searchResultsPagesCount;\n  @State() searchClientRequestProperties;\n\n  // local vars\n  @State() initialSearchResultsPerPage;\n\n  // store functions\n  @State() setSearchResultsPerPage: (perPage: number) => void = () => {};\n  @State() setSearchResultsPage: (page: number) => void = () => {};\n\n  private unsubscribe: () => void = () => {};\n  private cleanupCore?: () => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.unsubscribe = core.store.subscribe((state) => {\n      // store vars\n      this.searchTerm = state.searchTerm;\n      this.searchResultsPerPage = state.searchResultsPerPage;\n      this.searchResultsPage = state.searchResultsPage;\n      this.searchResultsCount = state.searchResultsCount;\n      this.searchClientRequestProperties = state.searchClientRequestProperties;\n\n      // local vars\n      this.searchResultsPagesCount = Math.ceil(\n        this.searchResultsCount / this.searchResultsPerPage,\n      );\n\n      // store functions\n      this.setSearchResultsPage = state.setSearchResultsPage;\n      this.setSearchResultsPerPage = state.setSearchResultsPerPage;\n    });\n\n    this.initialSearchResultsPerPage =\n      core.store.getState().searchResultsPerPage;\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n  }\n\n  render() {\n    // Check if this is an initialQuery case (string requestProperties with empty searchTerm)\n    const isInitialQuery =\n      typeof this.searchClientRequestProperties === 'string' &&\n      this.searchTerm.trim() === '';\n\n    // early return if there isn't a searchTerm (unless it's initialQuery) or there is 1 or fewer pages of results\n    if (\n      (!this.searchTerm && !isInitialQuery) ||\n      this.searchResultsPagesCount <= 1\n    ) {\n      return;\n    }\n\n    return (\n      <div class='searchcraft-search-results-per-page'>\n        <div class='searchcraft-search-results-per-page-select'>\n          <label\n            class='searchcraft-search-results-per-page-select-label'\n            htmlFor='searchcraft-search-results-per-page-select-input'\n          >\n            Results Per Page\n          </label>\n          <div class='searchcraft-search-results-per-page-select-input'>\n            <searchcraft-select\n              inputId='searchcraft-search-results-per-page-select-input'\n              name='results-per-page'\n              options={[...Array(5)].map((_, index) => {\n                const value =\n                  this.initialSearchResultsPerPage +\n                  Number(this.increment) * index;\n                return {\n                  label: `${value}`,\n                  value,\n                };\n              })}\n              onSelectChange={(event) => {\n                this.setSearchResultsPerPage(Number(event.detail));\n                this.setSearchResultsPage(1);\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}