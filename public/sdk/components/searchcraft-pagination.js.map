{"file":"searchcraft-pagination.js","mappings":"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","names":["SearchcraftPagination"],"sources":["src/components/searchcraft-pagination/searchcraft-pagination.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, Prop, State, h } from '@stencil/core';\nimport classNames from 'classnames';\n\n/**\n * This web component is designed to facilitate pagination of search results. Once a query is submitted, calculates the number for pages.\n *\n * @react-import\n * ```jsx\n * import { SearchcraftPagination } from \"@searchcraft/react-sdk\";\n * ```\n *\n * @vue-import\n * ```jsx\n * import { SearchcraftPagination } from \"@searchcraft/vue-sdk\";\n * ```\n *\n * @js-example\n * ```html\n * <searchcraft-pagination />\n * ```\n *\n * @react-example\n * ```jsx\n * <SearchcraftPagination />\n * ```\n *\n * @vue-example\n * ```jsx\n * <SearchcraftPagination />\n * ```\n */\n@Component({\n  tag: 'searchcraft-pagination',\n  shadow: false,\n})\nexport class SearchcraftPagination {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  // store vars\n  @State() searchTerm;\n  @State() searchResultsPerPage;\n  @State() searchResultsPage;\n  @State() searchResultsCount;\n  @State() searchClientRequestProperties;\n\n  // local vars\n  @State() searchResultsPagesCount = 1;\n  @State() searchResultsRangeMin = 1;\n  @State() searchResultsRangeMax = 1;\n\n  // store functions\n  @State() setSearchResultsPage: (page: number) => void = () => {};\n\n  private unsubscribe: () => void = () => {};\n  private cleanupCore?: () => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.unsubscribe = core.store.subscribe((state) => {\n      // store vars\n      this.searchTerm = state.searchTerm;\n      this.searchResultsPerPage = state.searchResultsPerPage;\n      this.searchResultsPage = state.searchResultsPage;\n      this.searchResultsCount = state.searchResultsCount;\n      this.searchClientRequestProperties = state.searchClientRequestProperties;\n\n      // local vars\n      this.searchResultsPagesCount = Math.ceil(\n        this.searchResultsCount / this.searchResultsPerPage,\n      );\n      this.searchResultsRangeMin =\n        (this.searchResultsPage - 1) * this.searchResultsPerPage + 1;\n      this.searchResultsRangeMax =\n        (this.searchResultsPerPage - 1) * this.searchResultsPerPage +\n        this.searchResultsPerPage;\n\n      // store functions\n      this.setSearchResultsPage = state.setSearchResultsPage;\n    });\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n  }\n\n  handleGoToPage(page: number) {\n    this.setSearchResultsPage(page);\n  }\n\n  renderOddPaginationItem(page: number) {\n    return (\n      <li>\n        <button\n          class={classNames('searchcraft-pagination-item', {\n            'searchcraft-pagination-item-active':\n              this.searchResultsPage === page,\n          })}\n          onClick={() => this.handleGoToPage(page)}\n          type='button'\n        >\n          {page}\n        </button>\n      </li>\n    );\n  }\n\n  renderEvenPaginationItem(page: number) {\n    if (this.searchResultsPagesCount <= page) {\n      return;\n    }\n\n    if (\n      this.searchResultsPagesCount <= 5 ||\n      page < Math.ceil(this.searchResultsPagesCount / 2) // is the first or second even pagination item\n        ? this.searchResultsPage <= page + 1\n        : this.searchResultsPage >= page - 1\n    ) {\n      return (\n        <li>\n          <button\n            class={classNames('searchcraft-pagination-item', {\n              'searchcraft-pagination-item-active':\n                this.searchResultsPage === page,\n            })}\n            onClick={() => this.handleGoToPage(page)}\n            type='button'\n          >\n            {page}\n          </button>\n        </li>\n      );\n    }\n\n    return (\n      <li>\n        <span class='searchcraft-pagination-item'>...</span>\n      </li>\n    );\n  }\n\n  renderMiddlePaginationItem() {\n    if (this.searchResultsPagesCount <= 3) {\n      return;\n    }\n\n    if (\n      this.searchResultsPagesCount <= 5 ||\n      this.searchResultsPage <= 3 ||\n      this.searchResultsPage >= this.searchResultsPagesCount - 2\n    ) {\n      return (\n        <li>\n          <button\n            class={classNames('searchcraft-pagination-item', {\n              'searchcraft-pagination-item-active':\n                this.searchResultsPage === 3 ||\n                this.searchResultsPage === this.searchResultsPagesCount - 2,\n            })}\n            type='button'\n            onClick={() =>\n              this.handleGoToPage(\n                this.searchResultsPage >= this.searchResultsPagesCount - 2\n                  ? this.searchResultsPagesCount - 2\n                  : 3,\n              )\n            }\n          >\n            {this.searchResultsPage >= this.searchResultsPagesCount - 2\n              ? this.searchResultsPagesCount - 2\n              : 3}\n          </button>\n        </li>\n      );\n    }\n\n    return (\n      <li>\n        <span class='searchcraft-pagination-item searchcraft-pagination-item-active'>\n          {this.searchResultsPage}\n        </span>\n      </li>\n    );\n  }\n\n  render() {\n    // Check if this is an initialQuery case (string requestProperties with empty searchTerm)\n    const isInitialQuery =\n      typeof this.searchClientRequestProperties === 'string' &&\n      this.searchTerm.trim() === '';\n\n    // early return if there isn't a searchTerm (unless it's initialQuery) or there is 1 or fewer pages of results\n    if ((!this.searchTerm && !isInitialQuery) || this.searchResultsPagesCount <= 1) {\n      return;\n    }\n\n    return (\n      <div class='searchcraft-pagination'>\n        <div class='searchcraft-pagination-control'>\n          <searchcraft-button\n            disabled={this.searchResultsPage === 1}\n            hierarchy='tertiary'\n            onButtonClick={() =>\n              this.handleGoToPage(Math.max(1, this.searchResultsPage - 1))\n            }\n            label='Previous'\n            iconPosition='left'\n            icon={\n              <svg\n                class='searchcraft-button-icon'\n                width='20'\n                height='20'\n                viewBox='0 0 20 20'\n                fill='none'\n                xmlns='http://www.w3.org/2000/svg'\n              >\n                <title>Previous page icon</title>\n                <path\n                  d='M12.5 15L7.5 10L12.5 5'\n                  stroke='currentColor'\n                  stroke-width='1.5'\n                  stroke-linecap='round'\n                  stroke-linejoin='round'\n                />\n              </svg>\n            }\n            iconOnly\n          />\n        </div>\n        <ul class='searchcraft-pagination-list'>\n          {this.renderOddPaginationItem(1)}\n          {this.renderEvenPaginationItem(2)}\n          {this.renderMiddlePaginationItem()}\n          {this.renderEvenPaginationItem(\n            this.searchResultsPagesCount > 4\n              ? this.searchResultsPagesCount - 1\n              : 4,\n          )}\n          {this.renderOddPaginationItem(this.searchResultsPagesCount)}\n        </ul>\n        <div class='searchcraft-pagination-control'>\n          <searchcraft-button\n            disabled={this.searchResultsPage === this.searchResultsPagesCount}\n            hierarchy='tertiary'\n            onButtonClick={() => {\n              this.handleGoToPage(\n                Math.min(\n                  this.searchResultsPagesCount,\n                  this.searchResultsPage + 1,\n                ),\n              );\n            }}\n            label='Next'\n            iconPosition='right'\n            icon={\n              <svg\n                class='searchcraft-button-icon'\n                width='20'\n                height='20'\n                viewBox='0 0 20 20'\n                fill='none'\n                xmlns='http://www.w3.org/2000/svg'\n              >\n                <title>Next page icon</title>\n                <path\n                  d='M7.5 15L12.5 10L7.5 5'\n                  stroke='currentColor'\n                  stroke-width='1.5'\n                  stroke-linecap='round'\n                  stroke-linejoin='round'\n                />\n              </svg>\n            }\n            iconOnly\n          />\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}