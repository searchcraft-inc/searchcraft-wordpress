{"file":"searchcraft-pagination.js","mappings":"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","names":["SearchcraftPagination","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/searchcraft-pagination/searchcraft-pagination.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, Prop, State, h } from '@stencil/core';\nimport classNames from 'classnames';\n\n/**\n * This web component is designed to facilitate pagination of search results. Once a query is submitted, calculates the number for pages.\n *\n * @react-import\n * ```jsx\n * import { SearchcraftPagination } from \"@searchcraft/react-sdk\";\n * ```\n *\n * @vue-import\n * ```jsx\n * import { SearchcraftPagination } from \"@searchcraft/vue-sdk\";\n * ```\n *\n * @js-example\n * ```html\n * <searchcraft-pagination />\n * ```\n *\n * @react-example\n * ```jsx\n * <SearchcraftPagination />\n * ```\n *\n * @vue-example\n * ```jsx\n * <SearchcraftPagination />\n * ```\n */\n@Component({\n  tag: 'searchcraft-pagination',\n  shadow: false,\n})\nexport class SearchcraftPagination {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  // store vars\n  @State() searchTerm;\n  @State() searchResultsPerPage;\n  @State() searchResultsPage;\n  @State() searchResultsCount;\n  @State() searchClientRequestProperties;\n\n  // local vars\n  @State() searchResultsPagesCount = 1;\n  @State() searchResultsRangeMin = 1;\n  @State() searchResultsRangeMax = 1;\n\n  // store functions\n  @State() setSearchResultsPage: (page: number) => void = () => {};\n\n  private unsubscribe: () => void = () => {};\n  private cleanupCore?: () => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.unsubscribe = core.store.subscribe((state) => {\n      // store vars\n      this.searchTerm = state.searchTerm;\n      this.searchResultsPerPage = state.searchResultsPerPage;\n      this.searchResultsPage = state.searchResultsPage;\n      this.searchResultsCount = state.searchResultsCount;\n      this.searchClientRequestProperties = state.searchClientRequestProperties;\n\n      // local vars\n      this.searchResultsPagesCount = Math.ceil(\n        this.searchResultsCount / this.searchResultsPerPage,\n      );\n      this.searchResultsRangeMin =\n        (this.searchResultsPage - 1) * this.searchResultsPerPage + 1;\n      this.searchResultsRangeMax =\n        (this.searchResultsPerPage - 1) * this.searchResultsPerPage +\n        this.searchResultsPerPage;\n\n      // store functions\n      this.setSearchResultsPage = state.setSearchResultsPage;\n    });\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n  }\n\n  handleGoToPage(page: number) {\n    this.setSearchResultsPage(page);\n  }\n\n  renderOddPaginationItem(page: number) {\n    return (\n      <li>\n        <button\n          class={classNames('searchcraft-pagination-item', {\n            'searchcraft-pagination-item-active':\n              this.searchResultsPage === page,\n          })}\n          onClick={() => this.handleGoToPage(page)}\n          type='button'\n        >\n          {page}\n        </button>\n      </li>\n    );\n  }\n\n  renderEvenPaginationItem(page: number) {\n    if (this.searchResultsPagesCount <= page) {\n      return;\n    }\n\n    if (\n      this.searchResultsPagesCount <= 5 ||\n      page < Math.ceil(this.searchResultsPagesCount / 2) // is the first or second even pagination item\n        ? this.searchResultsPage <= page + 1\n        : this.searchResultsPage >= page - 1\n    ) {\n      return (\n        <li>\n          <button\n            class={classNames('searchcraft-pagination-item', {\n              'searchcraft-pagination-item-active':\n                this.searchResultsPage === page,\n            })}\n            onClick={() => this.handleGoToPage(page)}\n            type='button'\n          >\n            {page}\n          </button>\n        </li>\n      );\n    }\n\n    return (\n      <li>\n        <span class='searchcraft-pagination-item'>...</span>\n      </li>\n    );\n  }\n\n  renderMiddlePaginationItem() {\n    if (this.searchResultsPagesCount <= 3) {\n      return;\n    }\n\n    if (\n      this.searchResultsPagesCount <= 5 ||\n      this.searchResultsPage <= 3 ||\n      this.searchResultsPage >= this.searchResultsPagesCount - 2\n    ) {\n      return (\n        <li>\n          <button\n            class={classNames('searchcraft-pagination-item', {\n              'searchcraft-pagination-item-active':\n                this.searchResultsPage === 3 ||\n                this.searchResultsPage === this.searchResultsPagesCount - 2,\n            })}\n            type='button'\n            onClick={() =>\n              this.handleGoToPage(\n                this.searchResultsPage >= this.searchResultsPagesCount - 2\n                  ? this.searchResultsPagesCount - 2\n                  : 3,\n              )\n            }\n          >\n            {this.searchResultsPage >= this.searchResultsPagesCount - 2\n              ? this.searchResultsPagesCount - 2\n              : 3}\n          </button>\n        </li>\n      );\n    }\n\n    return (\n      <li>\n        <span class='searchcraft-pagination-item searchcraft-pagination-item-active'>\n          {this.searchResultsPage}\n        </span>\n      </li>\n    );\n  }\n\n  render() {\n    // Check if this is an initialQuery case (string requestProperties with empty searchTerm)\n    const isInitialQuery =\n      typeof this.searchClientRequestProperties === 'string' &&\n      this.searchTerm.trim() === '';\n\n    // early return if there isn't a searchTerm (unless it's initialQuery) or there is 1 or fewer pages of results\n    if (\n      (!this.searchTerm && !isInitialQuery) ||\n      this.searchResultsPagesCount <= 1\n    ) {\n      return;\n    }\n\n    return (\n      <div class='searchcraft-pagination'>\n        <div class='searchcraft-pagination-control'>\n          <searchcraft-button\n            disabled={this.searchResultsPage === 1}\n            hierarchy='tertiary'\n            onButtonClick={() =>\n              this.handleGoToPage(Math.max(1, this.searchResultsPage - 1))\n            }\n            label='Previous'\n            iconPosition='left'\n            icon={\n              <svg\n                class='searchcraft-button-icon'\n                width='20'\n                height='20'\n                viewBox='0 0 20 20'\n                fill='none'\n                xmlns='http://www.w3.org/2000/svg'\n              >\n                <title>Previous page icon</title>\n                <path\n                  d='M12.5 15L7.5 10L12.5 5'\n                  stroke='currentColor'\n                  stroke-width='1.5'\n                  stroke-linecap='round'\n                  stroke-linejoin='round'\n                />\n              </svg>\n            }\n            iconOnly\n          />\n        </div>\n        <ul class='searchcraft-pagination-list'>\n          {this.renderOddPaginationItem(1)}\n          {this.renderEvenPaginationItem(2)}\n          {this.renderMiddlePaginationItem()}\n          {this.renderEvenPaginationItem(\n            this.searchResultsPagesCount > 4\n              ? this.searchResultsPagesCount - 1\n              : 4,\n          )}\n          {this.renderOddPaginationItem(this.searchResultsPagesCount)}\n        </ul>\n        <div class='searchcraft-pagination-control'>\n          <searchcraft-button\n            disabled={this.searchResultsPage === this.searchResultsPagesCount}\n            hierarchy='tertiary'\n            onButtonClick={() => {\n              this.handleGoToPage(\n                Math.min(\n                  this.searchResultsPagesCount,\n                  this.searchResultsPage + 1,\n                ),\n              );\n            }}\n            label='Next'\n            iconPosition='right'\n            icon={\n              <svg\n                class='searchcraft-button-icon'\n                width='20'\n                height='20'\n                viewBox='0 0 20 20'\n                fill='none'\n                xmlns='http://www.w3.org/2000/svg'\n              >\n                <title>Next page icon</title>\n                <path\n                  d='M7.5 15L12.5 10L7.5 5'\n                  stroke='currentColor'\n                  stroke-width='1.5'\n                  stroke-linecap='round'\n                  stroke-linejoin='round'\n                />\n              </svg>\n            }\n            iconOnly\n          />\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}