{"file":"searchcraft-filter-panel.js","mappings":"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","names":["SearchcraftFilterPanel"],"sources":["src/components/searchcraft-filter-panel/searchcraft-filter-panel.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, Element, Prop, State, h } from '@stencil/core';\nimport type {\n  DateRangeFilterItem,\n  ExactMatchToggleFilterItem,\n  FacetsFilterItem,\n  FilterItem,\n  MostRecentToggleFilterItem,\n  NumericFilterItem,\n} from '@types';\n\n/**\n * This web component represents a series of filters that allows users to refine and control their search queries by applying various filter criteria.\n *\n * @react-import\n * ```jsx\n * import { SearchcraftFilterPanel } from \"@searchcraft/react-sdk\";\n * ```\n *\n * @vue-import\n * ```jsx\n * import { SearchcraftFilterPanel } from \"@searchcraft/vue-sdk\";\n * ```\n *\n * @js-example\n * ```html\n * <!-- index.html -->\n * <searchcraft-filter-panel />\n * ```\n *\n * ```js\n * // index.js\n * const filterPanel = document.querySelector('searchcraft-filter-panel');\n *\n * if (filterPanel) {\n *   filterPanel.items = [];\n * }\n * ```\n *\n * @react-example\n * ```jsx\n * <SearchcraftFilterPanel items={[]} />\n * ```\n *\n * @vue-example\n * ```jsx\n * <SearchcraftFilterPanel :items=\"[]\" />\n * ```\n */\n@Component({\n  tag: 'searchcraft-filter-panel',\n  shadow: false,\n})\nexport class SearchcraftFilterPanel {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  /**\n   * The items to filter.\n   */\n  @Prop() items: FilterItem[] = [];\n  /**\n   * The breakpoint (in pixels) below which the filter panel will be hidden.\n   * Defaults to 768px (--sc-breakpoint-md).\n   */\n  @Prop() responsiveBreakpoint?: number = 768;\n  /**\n   * Controls whether the filter panel automatically hides/shows based on window size.\n   * - 'auto': Automatically hide/show based on window width\n   * - 'manual': User controls visibility manually\n   */\n  @Prop() responsiveBehavior?: 'auto' | 'manual' = 'auto';\n\n  @State() lastSearchTerm: string | undefined;\n  @State() isFilterPanelVisible = true;\n\n  @Element() hostElement!: HTMLElement;\n\n  private core?: SearchcraftCore;\n  private unsubscribe?: () => void;\n  private cleanupCore?: () => void;\n  private resizeObserver?: ResizeObserver;\n  private manuallyToggled = false; // Track if user manually toggled visibility\n  private toggleClickHandler?: (event: Event) => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.core = core;\n    this.setInitialDateRanges();\n\n    // Initialize visibility based on current window size if in auto mode\n    if (this.responsiveBehavior === 'auto') {\n      this.updateVisibilityBasedOnWindowSize();\n    }\n\n    this.unsubscribe = core.store.subscribe((state, prevState) => {\n      if (this.lastSearchTerm !== state.searchTerm) {\n        // A place to put actions to do when the query changes\n      }\n      this.lastSearchTerm = state.searchTerm || '';\n\n      // Check if visibility was manually changed (not by auto-resize)\n      if (prevState.isFilterPanelVisible !== state.isFilterPanelVisible) {\n        const windowWidth = window.innerWidth;\n        const autoVisibility = windowWidth >= (this.responsiveBreakpoint || 768);\n\n        // If the new state differs from what auto mode would set, it was manual\n        if (state.isFilterPanelVisible !== autoVisibility) {\n          this.manuallyToggled = true;\n        }\n\n        // Update toggle element attributes when visibility changes\n        this.updateToggleElementAttributes(state.isFilterPanelVisible);\n      }\n\n      this.isFilterPanelVisible = state.isFilterPanelVisible;\n    });\n  }\n\n  componentDidLoad() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n\n    // Set up resize observer if in auto mode\n    if (this.responsiveBehavior === 'auto' && typeof window !== 'undefined') {\n      this.setupResizeObserver();\n    }\n\n    // Set up click handlers for elements with data-toggle-filter-panel attribute\n    this.setupToggleClickHandlers();\n\n    // Set initial toggle element state immediately\n    // Use setTimeout to ensure this runs after the store is initialized\n    setTimeout(() => {\n      if (this.core) {\n        const currentVisibility = this.core.store.getState().isFilterPanelVisible;\n        this.updateToggleElementAttributes(currentVisibility);\n      }\n    }, 0);\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n    this.resizeObserver?.disconnect();\n\n    // Clean up window resize listener if it was used as fallback\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n\n    // Clean up toggle click handlers\n    this.cleanupToggleClickHandlers();\n  }\n\n  /**\n   * Sets up a ResizeObserver to watch for window size changes\n   */\n  setupResizeObserver() {\n    if (typeof ResizeObserver === 'undefined') {\n      // Fallback to window resize event if ResizeObserver is not available\n      window.addEventListener('resize', this.handleWindowResize);\n      return;\n    }\n\n    this.resizeObserver = new ResizeObserver(() => {\n      this.handleWindowResize();\n    });\n\n    // Observe the document body for size changes\n    this.resizeObserver.observe(document.body);\n  }\n\n  /**\n   * Handles window resize events\n   */\n  handleWindowResize = () => {\n    if (this.responsiveBehavior === 'auto') {\n      this.updateVisibilityBasedOnWindowSize();\n    }\n  };\n\n  /**\n   * Updates filter panel visibility based on current window width\n   */\n  updateVisibilityBasedOnWindowSize() {\n    if (typeof window === 'undefined') return;\n\n    // Don't auto-hide/show if user manually toggled it\n    if (this.manuallyToggled) return;\n\n    const windowWidth = window.innerWidth;\n    const shouldBeVisible = windowWidth >= (this.responsiveBreakpoint || 768);\n\n    if (this.core && this.isFilterPanelVisible !== shouldBeVisible) {\n      this.core.store.getState().setFilterPanelVisibility(shouldBeVisible);\n    }\n  }\n\n  /**\n   * Sets up click handlers for elements with data-toggle-filter-panel attribute\n   */\n  setupToggleClickHandlers() {\n    if (typeof document === 'undefined') return;\n\n    this.toggleClickHandler = (event: Event) => {\n      // Only allow toggle on mobile (below breakpoint)\n      const windowWidth = window.innerWidth;\n      if (windowWidth >= (this.responsiveBreakpoint || 768)) {\n        return; // Don't toggle on desktop\n      }\n\n      event.preventDefault();\n      if (this.core) {\n        const currentVisibility = this.core.store.getState().isFilterPanelVisible;\n        this.core.store.getState().setFilterPanelVisibility(!currentVisibility);\n      }\n    };\n\n    // Find all elements with the data attribute\n    const toggleElements = document.querySelectorAll('[data-toggle-filter-panel]');\n    toggleElements.forEach((element) => {\n      if (this.toggleClickHandler) {\n        element.addEventListener('click', this.toggleClickHandler);\n      }\n    });\n  }\n\n  /**\n   * Updates data attributes on toggle elements to reflect panel visibility state\n   */\n  updateToggleElementAttributes(isVisible: boolean) {\n    if (typeof document === 'undefined') return;\n\n    const toggleElements = document.querySelectorAll('[data-toggle-filter-panel]');\n    toggleElements.forEach((element) => {\n      if (isVisible) {\n        element.removeAttribute('data-filter-panel-collapsed');\n        element.setAttribute('data-filter-panel-expanded', '');\n      } else {\n        element.removeAttribute('data-filter-panel-expanded');\n        element.setAttribute('data-filter-panel-collapsed', '');\n      }\n    });\n  }\n\n  /**\n   * Cleans up click handlers for toggle elements\n   */\n  cleanupToggleClickHandlers() {\n    if (typeof document === 'undefined' || !this.toggleClickHandler) return;\n\n    const toggleElements = document.querySelectorAll('[data-toggle-filter-panel]');\n    toggleElements.forEach((element) => {\n      if (this.toggleClickHandler) {\n        element.removeEventListener('click', this.toggleClickHandler);\n      }\n    });\n  }\n\n  /**\n   * Sets the initial min/max date range values for search queries based on the filter items provided.\n   */\n  setInitialDateRanges() {\n    for (const item of this.items) {\n      if (item.type === 'dateRange') {\n        const dateItem = item as DateRangeFilterItem;\n\n        const startingMinDate = dateItem.options.minDate;\n        const startingMaxDate = dateItem.options.maxDate || new Date();\n\n        this.core?.store.getState()?.addRangeValueForIndexField({\n          fieldName: dateItem.fieldName,\n          value: `${dateItem.fieldName}:[${startingMinDate.toISOString()} TO ${startingMaxDate.toISOString()}]`,\n        });\n      }\n    }\n  }\n\n  handleDateRangeChanged(item: DateRangeFilterItem, min: number, max: number) {\n    const start = new Date(min);\n    const end = new Date(max);\n    this.core?.store.getState()?.addRangeValueForIndexField({\n      fieldName: item.fieldName,\n      value: `${item.fieldName}:[${start.toISOString()} TO ${end.toISOString()}]`,\n    });\n\n    this.core?.store.getState()?.search();\n  }\n\n  handleNumericRangeChanged(fieldName: string, min: number, max: number) {\n    this.core?.store.getState()?.addRangeValueForIndexField({\n      fieldName,\n      value: `${fieldName}:[${min} TO ${max}]`,\n    });\n    this.core?.store.getState()?.search();\n  }\n\n  handleFacetSelectionUpdated(fieldName: string, paths: string[]) {\n    if (paths.length > 0) {\n      this.core?.store.getState()?.addFacetPathsForIndexField({\n        fieldName,\n        value: `${fieldName}: IN [${paths.join(' ')}]`,\n      });\n    } else {\n      this.core?.store.getState()?.removeFacetPathsForIndexField(fieldName);\n    }\n    this.core?.store.getState()?.search();\n  }\n\n  handleExactMatchToggleUpdated(isActive: boolean) {\n    this.core?.store.getState()?.setSearchMode(isActive ? 'exact' : 'fuzzy');\n    this.core?.store.getState()?.search();\n  }\n\n  handleMostRecentToggleUpdated(fieldName: string, isActive: boolean) {\n    if (isActive) {\n      this.core?.store.getState()?.setSortOrder({\n        orderByField: fieldName,\n        sortType: 'desc',\n      });\n    } else {\n      this.core?.store.getState()?.setSortOrder({\n        orderByField: null,\n        sortType: null,\n      });\n    }\n    this.core?.store.getState()?.search();\n  }\n\n  /**\n   * Iterate through `items` and render them based on `type`\n   */\n  render() {\n    // Don't render if not visible\n    if (!this.isFilterPanelVisible) {\n      return null;\n    }\n\n    return (\n      <div class='searchcraft-filter-panel'>\n        {this.items.map((filterItem) => {\n          switch (filterItem.type) {\n            case 'dateRange': {\n              const item = filterItem as DateRangeFilterItem;\n              const maxDate = item.options.maxDate || new Date();\n\n              // return date range slider\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-slider\n                    min={item.options.minDate.getTime()}\n                    max={maxDate.getTime()}\n                    dataType='date'\n                    step={1}\n                    dateGranularity={item.options.granularity}\n                    onRangeChanged={(event) => {\n                      this.handleDateRangeChanged(\n                        item,\n                        event.detail.startValue,\n                        event.detail.endValue,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'numericRange': {\n              const item = filterItem as NumericFilterItem;\n              // return date range slider\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-slider\n                    min={item.options.min}\n                    max={item.options.max}\n                    step={item.options.granularity}\n                    onRangeChanged={(event) => {\n                      this.handleNumericRangeChanged(\n                        item.fieldName,\n                        event.detail.startValue,\n                        event.detail.endValue,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'facets': {\n              const item = filterItem as FacetsFilterItem;\n              // return \"filters-list\"\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-facet-list\n                    fieldName={item.fieldName}\n                    exclude={item.options.exclude}\n                    onFacetSelectionUpdated={(event) => {\n                      this.handleFacetSelectionUpdated(\n                        item.fieldName,\n                        event.detail.paths,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'exactMatchToggle': {\n              const item = filterItem as ExactMatchToggleFilterItem;\n              return (\n                <searchcraft-toggle-button\n                  label={item.label}\n                  subLabel={item.options.subLabel}\n                  onToggleUpdated={(event) => {\n                    this.handleExactMatchToggleUpdated(event.detail);\n                  }}\n                />\n              );\n            }\n            case 'mostRecentToggle': {\n              const item = filterItem as MostRecentToggleFilterItem;\n              return (\n                <searchcraft-toggle-button\n                  label={item.label}\n                  subLabel={item.options.subLabel}\n                  onToggleUpdated={(event) => {\n                    this.handleMostRecentToggleUpdated(\n                      item.fieldName,\n                      event.detail,\n                    );\n                  }}\n                />\n              );\n            }\n          }\n        })}\n      </div>\n    );\n  }\n}\n"],"version":3}