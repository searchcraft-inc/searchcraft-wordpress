{"file":"searchcraft-filter-panel.js","mappings":"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","names":["SearchcraftFilterPanel","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/searchcraft-filter-panel/searchcraft-filter-panel.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, Element, Prop, State, h } from '@stencil/core';\nimport type {\n  DateRangeFilterItem,\n  ExactMatchToggleFilterItem,\n  FacetsFilterItem,\n  FilterItem,\n  MostRecentToggleFilterItem,\n  NumericFilterItem,\n} from '@types';\n\n/**\n * This web component represents a series of filters that allows users to refine and control their search queries by applying various filter criteria.\n *\n * @react-import\n * ```jsx\n * import { SearchcraftFilterPanel } from \"@searchcraft/react-sdk\";\n * ```\n *\n * @vue-import\n * ```jsx\n * import { SearchcraftFilterPanel } from \"@searchcraft/vue-sdk\";\n * ```\n *\n * @js-example\n * ```html\n * <!-- index.html -->\n * <searchcraft-filter-panel />\n * ```\n *\n * ```js\n * // index.js\n * const filterPanel = document.querySelector('searchcraft-filter-panel');\n *\n * if (filterPanel) {\n *   filterPanel.items = [];\n * }\n * ```\n *\n * @react-example\n * ```jsx\n * <SearchcraftFilterPanel items={[]} />\n * ```\n *\n * @vue-example\n * ```jsx\n * <SearchcraftFilterPanel :items=\"[]\" />\n * ```\n */\n@Component({\n  tag: 'searchcraft-filter-panel',\n  shadow: false,\n})\nexport class SearchcraftFilterPanel {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  /**\n   * The items to filter.\n   */\n  @Prop() items: FilterItem[] = [];\n  /**\n   * The breakpoint (in pixels) below which the filter panel will be hidden.\n   * Defaults to 768px (--sc-breakpoint-md).\n   */\n  @Prop() responsiveBreakpoint?: number = 768;\n  /**\n   * Controls whether the filter panel automatically hides/shows based on window size.\n   * - 'auto': Automatically hide/show based on window width\n   * - 'manual': User controls visibility manually\n   */\n  @Prop() responsiveBehavior?: 'auto' | 'manual' = 'auto';\n\n  @State() lastSearchTerm: string | undefined;\n  @State() isFilterPanelVisible = true;\n\n  @Element() hostElement!: HTMLElement;\n\n  private core?: SearchcraftCore;\n  private unsubscribe?: () => void;\n  private cleanupCore?: () => void;\n  private resizeObserver?: ResizeObserver;\n  private manuallyToggled = false; // Track if user manually toggled visibility\n  private toggleClickHandler?: (event: Event) => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.core = core;\n    this.setInitialDateRanges();\n\n    // Initialize visibility based on current window size if in auto mode\n    if (this.responsiveBehavior === 'auto') {\n      this.updateVisibilityBasedOnWindowSize();\n    }\n\n    this.unsubscribe = core.store.subscribe((state, prevState) => {\n      if (this.lastSearchTerm !== state.searchTerm) {\n        // A place to put actions to do when the query changes\n      }\n      this.lastSearchTerm = state.searchTerm || '';\n\n      // Check if visibility was manually changed (not by auto-resize)\n      if (prevState.isFilterPanelVisible !== state.isFilterPanelVisible) {\n        const windowWidth = window.innerWidth;\n        const autoVisibility =\n          windowWidth >= (this.responsiveBreakpoint || 768);\n\n        // If the new state differs from what auto mode would set, it was manual\n        if (state.isFilterPanelVisible !== autoVisibility) {\n          this.manuallyToggled = true;\n        }\n\n        // Update toggle element attributes when visibility changes\n        this.updateToggleElementAttributes(state.isFilterPanelVisible);\n      }\n\n      this.isFilterPanelVisible = state.isFilterPanelVisible;\n    });\n  }\n\n  componentDidLoad() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n\n    // Set up resize observer if in auto mode\n    if (this.responsiveBehavior === 'auto' && typeof window !== 'undefined') {\n      this.setupResizeObserver();\n    }\n\n    // Set up click handlers for elements with data-toggle-filter-panel attribute\n    this.setupToggleClickHandlers();\n\n    // Set initial toggle element state immediately\n    // Use setTimeout to ensure this runs after the store is initialized\n    setTimeout(() => {\n      if (this.core) {\n        const currentVisibility =\n          this.core.store.getState().isFilterPanelVisible;\n        this.updateToggleElementAttributes(currentVisibility);\n      }\n    }, 0);\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe?.();\n    this.cleanupCore?.();\n    this.resizeObserver?.disconnect();\n\n    // Clean up window resize listener if it was used as fallback\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n\n    // Clean up toggle click handlers\n    this.cleanupToggleClickHandlers();\n  }\n\n  /**\n   * Sets up a ResizeObserver to watch for window size changes\n   */\n  setupResizeObserver() {\n    if (typeof ResizeObserver === 'undefined') {\n      // Fallback to window resize event if ResizeObserver is not available\n      window.addEventListener('resize', this.handleWindowResize);\n      return;\n    }\n\n    this.resizeObserver = new ResizeObserver(() => {\n      this.handleWindowResize();\n    });\n\n    // Observe the document body for size changes\n    this.resizeObserver.observe(document.body);\n  }\n\n  /**\n   * Handles window resize events\n   */\n  handleWindowResize = () => {\n    if (this.responsiveBehavior === 'auto') {\n      this.updateVisibilityBasedOnWindowSize();\n    }\n  };\n\n  /**\n   * Updates filter panel visibility based on current window width\n   */\n  updateVisibilityBasedOnWindowSize() {\n    if (typeof window === 'undefined') return;\n\n    // Don't auto-hide/show if user manually toggled it\n    if (this.manuallyToggled) return;\n\n    const windowWidth = window.innerWidth;\n    const shouldBeVisible = windowWidth >= (this.responsiveBreakpoint || 768);\n\n    if (this.core && this.isFilterPanelVisible !== shouldBeVisible) {\n      this.core.store.getState().setFilterPanelVisibility(shouldBeVisible);\n    }\n  }\n\n  /**\n   * Sets up click handlers for elements with data-toggle-filter-panel attribute\n   */\n  setupToggleClickHandlers() {\n    if (typeof document === 'undefined') return;\n\n    this.toggleClickHandler = (event: Event) => {\n      // Only allow toggle on mobile (below breakpoint)\n      const windowWidth = window.innerWidth;\n      if (windowWidth >= (this.responsiveBreakpoint || 768)) {\n        return; // Don't toggle on desktop\n      }\n\n      event.preventDefault();\n      if (this.core) {\n        const currentVisibility =\n          this.core.store.getState().isFilterPanelVisible;\n        this.core.store.getState().setFilterPanelVisibility(!currentVisibility);\n      }\n    };\n\n    // Find all elements with the data attribute\n    const toggleElements = document.querySelectorAll(\n      '[data-toggle-filter-panel]',\n    );\n    toggleElements.forEach((element) => {\n      if (this.toggleClickHandler) {\n        element.addEventListener('click', this.toggleClickHandler);\n      }\n    });\n  }\n\n  /**\n   * Updates data attributes on toggle elements to reflect panel visibility state\n   */\n  updateToggleElementAttributes(isVisible: boolean) {\n    if (typeof document === 'undefined') return;\n\n    const toggleElements = document.querySelectorAll(\n      '[data-toggle-filter-panel]',\n    );\n    toggleElements.forEach((element) => {\n      if (isVisible) {\n        element.removeAttribute('data-filter-panel-collapsed');\n        element.setAttribute('data-filter-panel-expanded', '');\n      } else {\n        element.removeAttribute('data-filter-panel-expanded');\n        element.setAttribute('data-filter-panel-collapsed', '');\n      }\n    });\n  }\n\n  /**\n   * Cleans up click handlers for toggle elements\n   */\n  cleanupToggleClickHandlers() {\n    if (typeof document === 'undefined' || !this.toggleClickHandler) return;\n\n    const toggleElements = document.querySelectorAll(\n      '[data-toggle-filter-panel]',\n    );\n    toggleElements.forEach((element) => {\n      if (this.toggleClickHandler) {\n        element.removeEventListener('click', this.toggleClickHandler);\n      }\n    });\n  }\n\n  /**\n   * Sets the initial min/max date range values for search queries based on the filter items provided.\n   */\n  setInitialDateRanges() {\n    for (const item of this.items) {\n      if (item.type === 'dateRange') {\n        const dateItem = item as DateRangeFilterItem;\n\n        const startingMinDate = dateItem.options.minDate;\n        const startingMaxDate = dateItem.options.maxDate || new Date();\n\n        this.core?.store.getState()?.addRangeValueForIndexField({\n          fieldName: dateItem.fieldName,\n          value: `${dateItem.fieldName}:[${startingMinDate.toISOString()} TO ${startingMaxDate.toISOString()}]`,\n        });\n      }\n    }\n  }\n\n  handleDateRangeChanged(item: DateRangeFilterItem, min: number, max: number) {\n    const start = new Date(min);\n    const end = new Date(max);\n    this.core?.store.getState()?.addRangeValueForIndexField({\n      fieldName: item.fieldName,\n      value: `${item.fieldName}:[${start.toISOString()} TO ${end.toISOString()}]`,\n    });\n\n    this.core?.store.getState()?.search();\n  }\n\n  handleNumericRangeChanged(fieldName: string, min: number, max: number) {\n    this.core?.store.getState()?.addRangeValueForIndexField({\n      fieldName,\n      value: `${fieldName}:[${min} TO ${max}]`,\n    });\n    this.core?.store.getState()?.search();\n  }\n\n  handleFacetSelectionUpdated(fieldName: string, paths: string[]) {\n    if (paths.length > 0) {\n      this.core?.store.getState()?.addFacetPathsForIndexField({\n        fieldName,\n        value: `${fieldName}: IN [${paths.join(' ')}]`,\n      });\n    } else {\n      this.core?.store.getState()?.removeFacetPathsForIndexField(fieldName);\n    }\n    this.core?.store.getState()?.search();\n  }\n\n  handleExactMatchToggleUpdated(isActive: boolean) {\n    this.core?.store.getState()?.setSearchMode(isActive ? 'exact' : 'fuzzy');\n    this.core?.store.getState()?.search();\n  }\n\n  handleMostRecentToggleUpdated(fieldName: string, isActive: boolean) {\n    if (isActive) {\n      this.core?.store.getState()?.setSortOrder({\n        orderByField: fieldName,\n        sortType: 'desc',\n      });\n    } else {\n      this.core?.store.getState()?.setSortOrder({\n        orderByField: null,\n        sortType: null,\n      });\n    }\n    this.core?.store.getState()?.search();\n  }\n\n  /**\n   * Iterate through `items` and render them based on `type`\n   */\n  render() {\n    // Don't render if not visible\n    if (!this.isFilterPanelVisible) {\n      return null;\n    }\n\n    return (\n      <div class='searchcraft-filter-panel'>\n        {this.items.map((filterItem) => {\n          switch (filterItem.type) {\n            case 'dateRange': {\n              const item = filterItem as DateRangeFilterItem;\n              const maxDate = item.options.maxDate || new Date();\n\n              // return date range slider\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-slider\n                    min={item.options.minDate.getTime()}\n                    max={maxDate.getTime()}\n                    dataType='date'\n                    step={1}\n                    dateGranularity={item.options.granularity}\n                    onRangeChanged={(event) => {\n                      this.handleDateRangeChanged(\n                        item,\n                        event.detail.startValue,\n                        event.detail.endValue,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'numericRange': {\n              const item = filterItem as NumericFilterItem;\n              // return date range slider\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-slider\n                    min={item.options.min}\n                    max={item.options.max}\n                    step={item.options.granularity}\n                    onRangeChanged={(event) => {\n                      this.handleNumericRangeChanged(\n                        item.fieldName,\n                        event.detail.startValue,\n                        event.detail.endValue,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'facets': {\n              const item = filterItem as FacetsFilterItem;\n              // return \"filters-list\"\n              return (\n                <div class='searchcraft-filter-panel-section'>\n                  <p class='searchcraft-filter-panel-label'>\n                    {filterItem.label}\n                  </p>\n                  <searchcraft-facet-list\n                    fieldName={item.fieldName}\n                    exclude={item.options.exclude}\n                    onFacetSelectionUpdated={(event) => {\n                      this.handleFacetSelectionUpdated(\n                        item.fieldName,\n                        event.detail.paths,\n                      );\n                    }}\n                  />\n                </div>\n              );\n            }\n            case 'exactMatchToggle': {\n              const item = filterItem as ExactMatchToggleFilterItem;\n              return (\n                <searchcraft-toggle-button\n                  label={item.label}\n                  subLabel={item.options.subLabel}\n                  onToggleUpdated={(event) => {\n                    this.handleExactMatchToggleUpdated(event.detail);\n                  }}\n                />\n              );\n            }\n            case 'mostRecentToggle': {\n              const item = filterItem as MostRecentToggleFilterItem;\n              return (\n                <searchcraft-toggle-button\n                  label={item.label}\n                  subLabel={item.options.subLabel}\n                  onToggleUpdated={(event) => {\n                    this.handleMostRecentToggleUpdated(\n                      item.fieldName,\n                      event.detail,\n                    );\n                  }}\n                />\n              );\n            }\n          }\n        })}\n      </div>\n    );\n  }\n}\n"],"version":3}