{"file":"p-Dr9rPC9v.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/searchcraft-popover-list-view/searchcraft-popover-list-view.tsx"],"sourcesContent":["import type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\nimport { Component, type JSX, Prop, h } from '@stencil/core';\nimport type {\n  AdClientResponseItem,\n  PopoverResultMappings,\n  SearchClientResponseItem,\n  SearchcraftConfig,\n} from '@types';\n\n/**\n * This web component is designed to display a list of results within a popover interface.\n * It is consumed within the `searchcraft-popover-form` component.\n *\n * @js-example\n * ```html\n * <searchcraft-popover-list-view />\n * ```\n *\n * @internal\n */\n@Component({\n  tag: 'searchcraft-popover-list-view',\n  shadow: false,\n})\nexport class SearchcraftPopoverListView {\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n  /**\n   * The mappings that define how the data in the documents are mapped to the\n   * list-view-item elements.\n   */\n  @Prop() popoverResultMappings: PopoverResultMappings | undefined;\n  /**\n   * The items to render in the list view.\n   */\n  @Prop() searchClientResponseItems: SearchClientResponseItem[] | undefined;\n  @Prop() adClientResponseItems: AdClientResponseItem[] | undefined;\n  @Prop() searchResultsPage!: number;\n  @Prop() searchResultsPerPage!: number;\n\n  private config?: SearchcraftConfig;\n  private cleanupCore?: () => void;\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.config = core.config;\n  }\n\n  connectedCallback() {\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.cleanupCore?.();\n  }\n\n  renderWithADMAds() {\n    return (\n      <div class='searchcraft-popover-list-view'>\n        {this.adClientResponseItems?.map((item) => (\n          <searchcraft-ad\n            searchcraft-id={this.searchcraftId}\n            adClientResponseItem={item}\n            adSource='adMarketplace'\n            key={item.id}\n            renderPosition='top'\n          />\n        ))}\n        {this.searchClientResponseItems?.map((item, index) => (\n          <searchcraft-popover-list-item\n            searchcraft-id={this.searchcraftId}\n            item={item}\n            key={item.id}\n            popoverResultMappings={this.popoverResultMappings}\n            documentPosition={\n              this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n\n  renderWithCustomAds() {\n    const itemsToRender: JSX.Element[] = [];\n    const interstitialInterval =\n      this.config?.customAdConfig?.adInterstitialInterval || 0;\n    const interstitialQuantity =\n      this.config?.customAdConfig?.adInterstitialQuantity || 1;\n    const adStartQuantity = this.config?.customAdConfig?.adStartQuantity || 0;\n    const adEndQuantity = this.config?.customAdConfig?.adEndQuantity || 0;\n    const searchItems = this.searchClientResponseItems || [];\n\n    // Renders ads at beginning\n    for (let n = 0; n < adStartQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Custom'\n          key={`${n}-ad`}\n          renderPosition='top'\n        />,\n      );\n    }\n\n    // Renders search results + interstitial ads\n    searchItems.forEach((item, index) => {\n      if (\n        interstitialInterval &&\n        index % interstitialInterval === 0 &&\n        index + interstitialInterval < searchItems.length &&\n        index >= interstitialInterval\n      ) {\n        for (let n = 0; n < interstitialQuantity; n++) {\n          itemsToRender.push(\n            <searchcraft-ad\n              searchcraft-id={this.searchcraftId}\n              adSource='Custom'\n              key={`${item.id}-ad-${n}`}\n              renderPosition='interstitial'\n            />,\n          );\n        }\n      }\n\n      itemsToRender.push(\n        <searchcraft-popover-list-item\n          searchcraft-id={this.searchcraftId}\n          item={item}\n          key={item.id}\n          popoverResultMappings={this.popoverResultMappings}\n          documentPosition={\n            this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n          }\n        />,\n      );\n    });\n\n    // Renders ads at end\n    for (let n = 0; n < adEndQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Custom'\n          key={`${n}-ad`}\n          renderPosition='bottom'\n        />,\n      );\n    }\n\n    return <div class='searchcraft-popover-list-view'>{itemsToRender}</div>;\n  }\n\n  renderWithNativoAds() {\n    const itemsToRender: JSX.Element[] = [];\n    const interstitialStartIndex =\n      this.config?.nativoConfig?.adInterstialStartIndex || 0;\n    const interstitialInterval =\n      this.config?.nativoConfig?.adInterstitialInterval || 0;\n    const interstitialQuantity =\n      this.config?.nativoConfig?.adInterstitialQuantity || 1;\n    const adStartQuantity = this.config?.nativoConfig?.adStartQuantity || 0;\n    const adEndQuantity = this.config?.nativoConfig?.adEndQuantity || 0;\n    const searchItems = this.searchClientResponseItems || [];\n\n    // Renders ads at beginning\n    for (let n = 0; n < adStartQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Nativo'\n          key={`${n}-ad`}\n          renderPosition='top'\n        />,\n      );\n    }\n\n    // Renders search results + interstitial ads\n    searchItems.forEach((item, index) => {\n      if (\n        interstitialInterval &&\n        (index + interstitialStartIndex) % interstitialInterval === 0 &&\n        index + interstitialInterval < searchItems.length &&\n        index >= interstitialInterval\n      ) {\n        for (let n = 0; n < interstitialQuantity; n++) {\n          itemsToRender.push(\n            <searchcraft-ad\n              searchcraft-id={this.searchcraftId}\n              adSource='Nativo'\n              key={`${item.id}-ad-${n}`}\n              renderPosition='interstitial'\n            />,\n          );\n        }\n      }\n\n      itemsToRender.push(\n        <searchcraft-popover-list-item\n          searchcraft-id={this.searchcraftId}\n          item={item}\n          key={item.id}\n          popoverResultMappings={this.popoverResultMappings}\n          documentPosition={\n            this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n          }\n        />,\n      );\n    });\n\n    // Renders ads at end\n    for (let n = 0; n < adEndQuantity; n++) {\n      itemsToRender.push(\n        <searchcraft-ad\n          searchcraft-id={this.searchcraftId}\n          adSource='Nativo'\n          key={`${n}-ad`}\n          renderPosition='bottom'\n        />,\n      );\n    }\n\n    return <div class='searchcraft-popover-list-view'>{itemsToRender}</div>;\n  }\n\n  renderWithNoAds() {\n    return (\n      <div class='searchcraft-popover-list-view'>\n        {this.searchClientResponseItems?.map((item, index) => (\n          <searchcraft-popover-list-item\n            searchcraft-id={this.searchcraftId}\n            item={item}\n            key={item.id}\n            popoverResultMappings={this.popoverResultMappings}\n            documentPosition={\n              this.searchResultsPerPage * (this.searchResultsPage - 1) + index\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    if (this.config?.customAdConfig) {\n      return this.renderWithCustomAds();\n    }\n    if (this.config?.nativoConfig) {\n      return this.renderWithNativoAds();\n    }\n    if (this.config?.admAdConfig) {\n      return this.renderWithADMAds();\n    }\n    return this.renderWithNoAds();\n  }\n}\n"],"version":3}