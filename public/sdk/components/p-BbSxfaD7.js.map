{"file":"p-BbSxfaD7.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/utils/throttle.ts","src/components/searchcraft-slider/searchcraft-slider.tsx"],"sourcesContent":["/**\n * Creates a throttled version of the given function that only invokes\n * the original function at most once every specified number of milliseconds.\n *\n * The logic is written in a way that the last invocation is always called, after the\n * throttle cooldown period has ended.\n *\n * @template Arguments - The argument types for the function to throttle\n * @param callback - The function to throttle\n * @param delayInMilliseconds - The number of milliseconds to wait before allowing the next invocation\n * @returns A throttled version of the original function\n */\nexport function throttle<\n  // biome-ignore lint/suspicious/noExplicitAny: To be an effective util, this needs to be flexibile enough allow any type of arguments.\n  Arguments extends any[],\n>(\n  callback: (...args: Arguments) => void,\n  delayInMilliseconds: number,\n): (...args: Arguments) => void {\n  let isThrottleOnCooldown = false;\n  let trailingCallArgs: Arguments | null = null;\n\n  const invokeAction = (args: Arguments) => {\n    callback(...args);\n    isThrottleOnCooldown = true;\n    setTimeout(() => {\n      isThrottleOnCooldown = false;\n      if (trailingCallArgs) {\n        const nextArgs = trailingCallArgs;\n        trailingCallArgs = null;\n        invokeAction(nextArgs);\n      }\n    }, delayInMilliseconds);\n  };\n\n  return (...args: Arguments) => {\n    if (!isThrottleOnCooldown) {\n      invokeAction(args);\n    } else {\n      trailingCallArgs = args;\n    }\n  };\n}\n","import {\n  Component,\n  Event,\n  type EventEmitter,\n  Prop,\n  State,\n  h,\n} from '@stencil/core';\nimport {\n  getDifferenceInUnits,\n  getFormattedDateString,\n  getStartOf,\n} from '@utils';\nimport { throttle } from '@utils/throttle';\nimport classNames from 'classnames';\n\n/**\n * This web component is designed to allow users to select a value from a range defined by a minimum and maximum value. The component renders a slider interface, which can be used to visually choose a value between two boundaries.\n *\n * @internal\n */\n@Component({\n  tag: 'searchcraft-slider',\n  shadow: false,\n})\nexport class SearchcraftSlider {\n  /**\n   * The maximum value allowed.\n   */\n  @Prop() max = 100;\n  /**\n   * The minimum value allowed.\n   */\n  @Prop() min = 0;\n  /**\n   * The step amount for the slider inputs.\n   */\n  @Prop() step = 1;\n  /** The type of data the sliders are using. */\n  @Prop() dataType: 'number' | 'date' = 'number';\n  /** The date granularity to use. Used to format date labels. */\n  @Prop() dateGranularity?: 'year' | 'month' | 'day' | 'hour';\n\n  @State() lowerBound = 0;\n  @State() upperBound = 1;\n  @State() endValue = 0;\n  @State() startValue = 0;\n  @State() lastFocusedHandle: 'min' | 'max' = 'max';\n\n  throttledEmitUpdate: () => void = () => {};\n\n  /**\n   * When the range has changed.\n   * */\n  @Event() rangeChanged:\n    | EventEmitter<{ startValue: number; endValue: number }>\n    | undefined;\n\n  connectedCallback() {\n    switch (this.dataType) {\n      case 'number':\n        this.startValue = this.min;\n        this.endValue = this.max;\n        this.lowerBound = this.min;\n        this.upperBound = this.max;\n        break;\n      case 'date': {\n        this.startValue = 0;\n        this.endValue = getDifferenceInUnits(\n          this.dateGranularity || 'year',\n          this.min,\n          this.max,\n        );\n        this.lowerBound = 0;\n        this.upperBound = this.endValue;\n\n        break;\n      }\n    }\n\n    this.throttledEmitUpdate = throttle(this.emitUpdate, 120);\n  }\n\n  private emitUpdate = async () => {\n    switch (this.dataType) {\n      case 'number':\n        this.rangeChanged?.emit({\n          startValue: this.startValue,\n          endValue: this.endValue,\n        });\n        break;\n      case 'date': {\n        const granularity = this.dateGranularity || 'year';\n        const startTimestamp = getStartOf(\n          this.min,\n          granularity,\n          this.lowerBound + this.startValue,\n        );\n        const endTimestamp = getStartOf(\n          this.min,\n          granularity,\n          this.lowerBound + this.endValue + 1,\n        );\n        this.rangeChanged?.emit({\n          startValue: startTimestamp,\n          endValue: endTimestamp,\n        });\n        break;\n      }\n    }\n  };\n\n  private handleStartValueChange = (event: InputEvent) => {\n    const inputElement = event.target as HTMLInputElement;\n    const value = Number.parseInt(inputElement.value, 10);\n    this.lastFocusedHandle = 'min';\n\n    if (value <= this.endValue) {\n      this.startValue = value;\n      this.throttledEmitUpdate();\n    } else {\n      this.startValue = this.endValue;\n      inputElement.value = `${this.endValue}`;\n    }\n  };\n\n  private handleEndValueChange = (event: InputEvent) => {\n    const inputElement = event.target as HTMLInputElement;\n    const value = Number.parseInt(inputElement.value, 10);\n    this.lastFocusedHandle = 'max';\n\n    if (value >= this.startValue) {\n      this.endValue = value;\n      this.throttledEmitUpdate();\n    } else {\n      this.endValue = this.startValue;\n      inputElement.value = `${this.startValue}`;\n    }\n  };\n\n  private getLabel = (value): string => {\n    switch (this.dataType) {\n      case 'number':\n        return `${this.startValue}`;\n      case 'date': {\n        const granularity = this.dateGranularity || 'year';\n        const dateOffset = this.lowerBound + value;\n        const timestamp = getStartOf(this.min, granularity, dateOffset);\n\n        return getFormattedDateString(\n          this.dateGranularity || 'year',\n          new Date(timestamp),\n        );\n      }\n    }\n  };\n\n  render() {\n    const startPercent =\n      ((this.startValue - this.lowerBound) /\n        (this.upperBound - this.lowerBound)) *\n      100;\n    const endPercent =\n      ((this.endValue - this.lowerBound) /\n        (this.upperBound - this.lowerBound)) *\n      100;\n\n    const startLabel = this.getLabel(this.startValue);\n    const endLabel = this.getLabel(this.endValue);\n\n    return (\n      <div class='searchcraft-slider'>\n        <div class='searchcraft-slider-range'>\n          <div\n            class='searchcraft-slider-active-range'\n            style={{\n              left: `${startPercent}%`,\n              width: `${endPercent - startPercent}%`,\n            }}\n          />\n          <input\n            class={classNames(\n              'searchcraft-slider-input',\n              'searchcraft-slider-input-min-handle',\n            )}\n            max={this.upperBound}\n            min={this.lowerBound}\n            onInput={this.handleStartValueChange.bind(this)}\n            step={this.step}\n            style={{ zIndex: this.lastFocusedHandle === 'min' ? '2' : '1' }}\n            type='range'\n            value={this.startValue}\n          />\n          <input\n            class={classNames(\n              'searchcraft-slider-input',\n              'searchcraft-slider-input-max-handle',\n            )}\n            max={this.upperBound}\n            min={this.lowerBound}\n            onInput={this.handleEndValueChange.bind(this)}\n            step={this.step}\n            style={{ zIndex: this.lastFocusedHandle === 'max' ? '2' : '1' }}\n            type='range'\n            value={this.endValue}\n          />\n        </div>\n        <div class='searchcraft-slider-label'>\n          <span class='searchcraft-slider-start-label'>{startLabel}</span>\n          <span class='searchcraft-slider-end-label'>{endLabel}</span>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}