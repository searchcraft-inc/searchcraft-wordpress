{"file":"p-fc8ccffa.js","mappings":";;;;;MAmBa,0BAA0B;;;;;IAC7B,IAAI,CAAuC;IAC3C,qBAAqB,CAAoC;;IAEzD,gBAAgB,GAAG,CAAC,CAAC;;;;IAIrB,aAAa,CAAU;IAEtB,KAAK,CAAU;IACf,QAAQ,CAAU;IAClB,IAAI,CAAU;IACd,WAAW,CAAU;IACrB,QAAQ,CAAU;IAC3B,IAAI,CAAmB;IACf,WAAW,CAAc;IAEjC,qBAAqB,CAAC,QAAwB;QAC5C,IAAI,CAAC,KAAK,GAAG,uCAAuC,CAClD,QAAQ,EACR,IAAI,CAAC,qBAAqB,EAAE,KAAK,CAClC,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,uCAAuC,CACrD,QAAQ,EACR,IAAI,CAAC,qBAAqB,EAAE,QAAQ,CACrC,CAAC;QACF,IAAI,CAAC,IAAI,GAAG,uCAAuC,CACjD,QAAQ,EACR,IAAI,CAAC,qBAAqB,EAAE,IAAI,CACjC,CAAC;QACF,IAAI,CAAC,WAAW,GAAG,uCAAuC,CACxD,QAAQ,EACR,IAAI,CAAC,qBAAqB,EAAE,WAAW,CACxC,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,uCAAuC,CACrD,QAAQ,EACR,IAAI,CAAC,qBAAqB,EAAE,QAAQ,CACrC,CAAC;KACH;IAED,eAAe,CAAC,IAAqB;QACnC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB;IAED,iBAAiB;QACf,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAChD;QACD,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,eAAe,CACzC,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAChC,CAAC;KACH;IAED,oBAAoB;QAClB,IAAI,CAAC,WAAW,IAAI,CAAC;KACtB;IAED,eAAe,GAAG;QAChB,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,MAAM,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAChD,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC;YAC1D,MAAM,mBAAmB,GACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,yBAAyB,CAAC,MAAM,IAAI,CAAC,CAAC;YAEnE,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,gBAAgB,CAAC,kBAAkB,EAAE;gBAC5D,iBAAiB;gBACjB,mBAAmB;gBACnB,WAAW;aACZ,CAAC,CAAC;SACJ;KACF,CAAC;IAEF,MAAM;QACJ,QACE,4DAAK,KAAK,EAAC,+BAA+B,IACxC,0DACE,KAAK,EAAC,oCAAoC,EAC1C,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,IAEvC,IAAI,CAAC,WAAW,KACf,4DAAK,KAAK,EAAC,6CAA6C,IACtD,4DACE,GAAG,EAAE,IAAI,CAAC,QAAQ,EAClB,GAAG,EAAE,IAAI,CAAC,WAAW,EACrB,KAAK,EAAC,qCAAqC,GAC3C,CACE,CACP,EACD,4DAAK,KAAK,EAAC,uCAAuC,IAC/C,IAAI,CAAC,KAAK,KACT,0DAAG,KAAK,EAAC,6CAA6C,IACnD,IAAI,CAAC,KAAK,CACT,CACL,EACA,IAAI,CAAC,QAAQ,KACZ,0DAAG,KAAK,EAAC,gDAAgD,IACtD,IAAI,CAAC,QAAQ,CACZ,CACL,CACG,CACJ,CACA,EACN;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["src/components/searchcraft-popover-list-item/searchcraft-popover-list-item.tsx"],"sourcesContent":["import type {\n  SearchDocument,\n  SearchClientResponseItem,\n  PopoverResultMappings,\n} from '@types';\nimport { Component, h, Prop, State } from '@stencil/core';\nimport { getDocumentValueFromSearchResultMapping } from '@utils';\nimport type { SearchcraftCore } from '@classes';\nimport { registry } from '@classes/CoreInstanceRegistry';\n\n/**\n * A single list item rendered in a searchcraft-popover-list-view.\n *\n * @internal\n */\n@Component({\n  tag: 'searchcraft-popover-list-item',\n  shadow: false,\n})\nexport class SearchcraftPopoverListItem {\n  @Prop() item: SearchClientResponseItem | undefined;\n  @Prop() popoverResultMappings: PopoverResultMappings | undefined;\n  /** The document position relative to the search results (For Measure) */\n  @Prop() documentPosition = 0;\n  /**\n   * The id of the Searchcraft instance that this component should use.\n   */\n  @Prop() searchcraftId?: string;\n\n  @State() title?: string;\n  @State() subtitle?: string;\n  @State() href?: string;\n  @State() imageSource?: string;\n  @State() imageAlt?: string;\n  core?: SearchcraftCore;\n  private cleanupCore?: () => void;\n\n  mapValuesFromDocument(document: SearchDocument) {\n    this.title = getDocumentValueFromSearchResultMapping(\n      document,\n      this.popoverResultMappings?.title,\n    );\n    this.subtitle = getDocumentValueFromSearchResultMapping(\n      document,\n      this.popoverResultMappings?.subtitle,\n    );\n    this.href = getDocumentValueFromSearchResultMapping(\n      document,\n      this.popoverResultMappings?.href,\n    );\n    this.imageSource = getDocumentValueFromSearchResultMapping(\n      document,\n      this.popoverResultMappings?.imageSource,\n    );\n    this.imageAlt = getDocumentValueFromSearchResultMapping(\n      document,\n      this.popoverResultMappings?.imageAlt,\n    );\n  }\n\n  onCoreAvailable(core: SearchcraftCore) {\n    this.core = core;\n  }\n\n  connectedCallback() {\n    if (this.item) {\n      this.mapValuesFromDocument(this.item.document);\n    }\n    this.cleanupCore = registry.useCoreInstance(\n      this.searchcraftId,\n      this.onCoreAvailable.bind(this),\n    );\n  }\n\n  disconnectedCallback() {\n    this.cleanupCore?.();\n  }\n\n  handleLinkClick = () => {\n    if (this.core) {\n      const document_position = this.documentPosition;\n      const search_term = this.core.store.getState().searchTerm;\n      const number_of_documents =\n        this.core.store.getState().searchClientResponseItems.length || 0;\n\n      this.core.measureClient?.sendMeasureEvent('document_clicked', {\n        document_position,\n        number_of_documents,\n        search_term,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div class='searchcraft-popover-list-item'>\n        <a\n          class='searchcraft-popover-list-item-link'\n          href={this.href}\n          onClick={this.handleLinkClick.bind(this)}\n        >\n          {this.imageSource && (\n            <div class='searchcraft-popover-list-item-image-wrapper'>\n              <img\n                alt={this.imageAlt}\n                src={this.imageSource}\n                class='searchcraft-popover-list-item-image'\n              />\n            </div>\n          )}\n          <div class='searchcraft-popover-list-item-content'>\n            {this.title && (\n              <p class='searchcraft-popover-list-item-content-title'>\n                {this.title}\n              </p>\n            )}\n            {this.subtitle && (\n              <p class='searchcraft-popover-list-item-content-subtitle'>\n                {this.subtitle}\n              </p>\n            )}\n          </div>\n        </a>\n      </div>\n    );\n  }\n}\n"],"version":3}